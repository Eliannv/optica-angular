<div class="form-container">
    <div class="form-card">
        <!-- HEADER -->
        <div class="form-header">
            <div class="header-content">
                <h1 class="form-title"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lock-keyhole-open-icon lucide-lock-keyhole-open"><circle cx="12" cy="16" r="1"/><rect width="18" height="12" x="3" y="10" rx="2"/><path d="M7 10V7a5 5 0 0 1 9.33-2.5"/></svg> Abrir Nueva Caja Chica</h1>
                <button class="btn-secondary" (click)="volver()">← Atrás</button>
            </div>
        </div>

        <!-- FORMULARIO -->
        <form [formGroup]="form" (ngSubmit)="abrirCaja()" class="form-body">
            <!-- FECHA - Solo lectura, es la fecha actual del día -->
            <div class="form-group">
                <label for="fecha">Fecha de Apertura *</label>
                <div class="fecha-display">
                    <span class="fecha-value">{{ form.get('fecha')?.value | date:'dd/MM/yyyy' }}</span>
                    <small class="fecha-hint">(Fecha del día actual)</small>
                </div>
                <input id="fecha" type="hidden" formControlName="fecha" />
            </div>

            <!-- MONTO INICIAL -->
            <div class="form-group">
                <label for="monto_inicial">Monto Inicial *</label>
                <input id="monto_inicial" type="number" formControlName="monto_inicial" class="form-control" placeholder="0.00" step="0.01" min="0" [class.error]="montoControl?.touched && montoControl?.invalid" />
                <ng-container *ngIf="montoControl?.touched && montoControl?.invalid">
                    <span class="error-text">
            <ng-container *ngIf="montoControl?.errors?.['required']">
              El monto inicial es requerido
            </ng-container>
            <ng-container *ngIf="montoControl?.errors?.['min']">
              El monto debe ser mayor o igual a 0
            </ng-container>
          </span>
                </ng-container>
            </div>

            <!-- OBSERVACIÓN -->
            <div class="form-group">
                <label for="observacion">Observación (Opcional)</label>
                <textarea id="observacion" formControlName="observacion" class="form-control textarea" placeholder="Detalles sobre la apertura de caja..." rows="3"></textarea>
            </div>

            <!-- MENSAJES DE ERROR -->
            <div *ngIf="error" class="alert alert-error">
                {{ error }}
            </div>

            <!-- BOTONES -->
            <div class="form-actions">
                <button type="button" class="btn-secondary" (click)="volver()" [disabled]="cargando">
          Cancelar
        </button>
                <button type="submit" class="btn-primary" [disabled]="form.invalid || cargando">
          <span *ngIf="!cargando">✓ Abrir Caja</span>
          <span *ngIf="cargando">Abriendo...</span>
        </button>
            </div>
        </form>
    </div>
</div>